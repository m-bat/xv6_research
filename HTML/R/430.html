<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>mycpu</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/120.html#L126'>mycpu</a>             126 defs.h         struct cpu*     mycpu(void);</span>
<span class='curline'><a href='../S/158.html#L65'>mycpu</a>              65 main.c           xchg(&amp;(mycpu()-&gt;started), 1); // tell startothers() we're up</span>
<span class='curline'><a href='../S/158.html#L87'>mycpu</a>              87 main.c             if(c == mycpu())  // We've started already.</span>
<span class='curline'><a href='../S/64.html#L65'>mycpu</a>              65 proc.c           return mycpu()-cpus;</span>
<span class='curline'><a href='../S/64.html#L95'>mycpu</a>              95 proc.c           c = mycpu();</span>
<span class='curline'><a href='../S/64.html#L380'>mycpu</a>             380 proc.c           mycpu()-&gt;ncli = 1; //Force the lock depth to 1 because of process local data.</span>
<span class='curline'><a href='../S/64.html#L444'>mycpu</a>             444 proc.c           struct cpu *c = mycpu();</span>
<span class='curline'><a href='../S/64.html#L491'>mycpu</a>             491 proc.c           if(mycpu()-&gt;ncli != 1)</span>
<span class='curline'><a href='../S/64.html#L497'>mycpu</a>             497 proc.c           intena = mycpu()-&gt;intena;</span>
<span class='curline'><a href='../S/64.html#L498'>mycpu</a>             498 proc.c           swtch(&amp;p-&gt;context, mycpu()-&gt;scheduler);</span>
<span class='curline'><a href='../S/64.html#L499'>mycpu</a>             499 proc.c           mycpu()-&gt;intena = intena;</span>
<span class='curline'><a href='../S/41.html#L41'>mycpu</a>              41 spinlock.c       lk-&gt;cpu = mycpu();</span>
<span class='curline'><a href='../S/41.html#L92'>mycpu</a>              92 spinlock.c       return lock-&gt;locked &amp;&amp; lock-&gt;cpu == mycpu();</span>
<span class='curline'><a href='../S/41.html#L107'>mycpu</a>             107 spinlock.c       if(mycpu()-&gt;ncli == 0)</span>
<span class='curline'><a href='../S/41.html#L108'>mycpu</a>             108 spinlock.c         mycpu()-&gt;intena = eflags &amp; FL_IF;</span>
<span class='curline'><a href='../S/41.html#L109'>mycpu</a>             109 spinlock.c       mycpu()-&gt;ncli += 1;</span>
<span class='curline'><a href='../S/41.html#L117'>mycpu</a>             117 spinlock.c       if(--mycpu()-&gt;ncli &lt; 0)</span>
<span class='curline'><a href='../S/41.html#L119'>mycpu</a>             119 spinlock.c       if(mycpu()-&gt;ncli == 0 &amp;&amp; mycpu()-&gt;intena)    </span>
<span class='curline'><a href='../S/162.html#L264'>mycpu</a>             264 vm.c             mycpu()-&gt;gdt[SEG_TSS] = SEG16(STS_T32A, &amp;mycpu()-&gt;ts,</span>
<span class='curline'><a href='../S/162.html#L265'>mycpu</a>             265 vm.c                                           sizeof(mycpu()-&gt;ts)-1, 0);</span>
<span class='curline'><a href='../S/162.html#L266'>mycpu</a>             266 vm.c             mycpu()-&gt;gdt[SEG_TSS].s = 0;</span>
<span class='curline'><a href='../S/162.html#L267'>mycpu</a>             267 vm.c             mycpu()-&gt;ts.ss0 = SEG_KDATA &lt;&lt; 3;</span>
<span class='curline'><a href='../S/162.html#L268'>mycpu</a>             268 vm.c             mycpu()-&gt;ts.esp0 = (uint)p-&gt;kstack + KSTACKSIZE;</span>
<span class='curline'><a href='../S/162.html#L271'>mycpu</a>             271 vm.c             mycpu()-&gt;ts.iomb = (ushort) 0xFFFF;</span>
<span class='curline'><a href='../S/162.html#L295'>mycpu</a>             295 vm.c             mycpu()-&gt;gdt[SEG_TSS] = SEG16(STS_T32A, &amp;mycpu()-&gt;ts,</span>
<span class='curline'><a href='../S/162.html#L296'>mycpu</a>             296 vm.c                                           sizeof(mycpu()-&gt;ts)-1, 0);</span>
<span class='curline'><a href='../S/162.html#L297'>mycpu</a>             297 vm.c             mycpu()-&gt;gdt[SEG_TSS].s = 0;</span>
<span class='curline'><a href='../S/162.html#L298'>mycpu</a>             298 vm.c             mycpu()-&gt;ts.ss0 = SEG_KDATA &lt;&lt; 3;</span>
<span class='curline'><a href='../S/162.html#L299'>mycpu</a>             299 vm.c             mycpu()-&gt;ts.esp0 = (uint)p-&gt;kstack + KSTACKSIZE;</span>
<span class='curline'><a href='../S/162.html#L302'>mycpu</a>             302 vm.c             mycpu()-&gt;ts.iomb = (ushort) 0xFFFF;</span>
</pre>
</body>
</html>
